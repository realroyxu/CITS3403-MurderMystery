{% extends 'base.html' %}

{% block content %}
<div class="login-form p-5">
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group p-3">
            <label for="old_password">Old Password</label>
            {{ form.old_password(class="form-control", id="old_password", placeholder="Enter Current Password") }}
        </div>
        <div class="form-group p-3">
            <label for="new_password">New Password</label>
            {{ form.new_password(class="form-control", id="new_password", placeholder="Enter New Password") }}
        </div>
        <div class="form-group p-3">
            <label for="confirm_new_password">Confirm New Password</label>
            {{ form.confirm_new_password(class="form-control", id="confirm_new_password", placeholder="Confirm New Password") }}
        </div>
        <div class="button">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            {% if category == 'success' %}
              <script>
                  window.alert("{{ message }}");
                  window.location.href = "/logout";
              </script>
            {% else %}
              <script>
                  window.alert("{{ message }}");
              </script>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}
{% endblock %}
